(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1575:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(5155),o=n(2115);function l(){let[e,t]=(0,o.useState)([]),[n,l]=(0,o.useState)(null),s=(0,o.useRef)(null),[i,a]=(0,o.useState)({x:32,y:32}),[d,c]=(0,o.useState)(!1),[u,f]=(0,o.useState)({x:0,y:0});(0,o.useEffect)(()=>{let e=localStorage.getItem("loginUser");l(e?JSON.parse(e):null)},[]),(0,o.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("applyCart");t(e?JSON.parse(e):[])};return e(),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,o.useEffect)(()=>{let e=setInterval(()=>{let e=localStorage.getItem("applyCart");t(e?JSON.parse(e):[])},1e3);return()=>clearInterval(e)},[]),(0,o.useEffect)(()=>{a({x:32,y:window.innerHeight-250})},[]);let g=e=>{c(!0),f({x:e.clientX-i.x,y:e.clientY-i.y})},m=e=>{d&&a({x:e.clientX-u.x,y:e.clientY-u.y})},x=()=>{c(!1)};return((0,o.useEffect)(()=>(d?(window.addEventListener("mousemove",m),window.addEventListener("mouseup",x)):(window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",x)),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",x)}),[d,u]),n)?(0,r.jsxs)("div",{ref:s,style:{position:"fixed",left:i.x,top:i.y,background:"#fff",color:"#333",border:"1px solid #0070f3",borderRadius:12,boxShadow:"0 2px 8px #0003",padding:16,minWidth:220,zIndex:1,cursor:d?"grabbing":"grab",userSelect:"none",pointerEvents:"auto"},onMouseDown:g,children:[(0,r.jsx)("div",{style:{fontWeight:"bold",marginBottom:8,cursor:"grab"},onMouseDown:g,children:"申請清單"}),(0,r.jsx)("ul",{style:{margin:0,padding:0,listStyle:"none"},children:0===e.length?(0,r.jsx)("li",{style:{color:"#888"},children:"尚未加入任何宣導品"}):e.map(e=>(0,r.jsxs)("li",{children:[e.name,"（數量：",e.count||1,"）"]},e.id))})]}):null}},2353:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_9c426a",variable:"__variable_9c426a"}},5695:(e,t,n)=>{"use strict";var r=n(8999);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},7275:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_bd042c",variable:"__variable_bd042c"}},7969:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(5155),o=n(6874),l=n.n(o),s=n(5695),i=n(2115);function a(){let[e,t]=(0,i.useState)(null);return(0,s.useRouter)(),(0,i.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("loginUser");t(e?JSON.parse(e):null)};return e(),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,r.jsxs)("nav",{style:{width:"100%",background:"linear-gradient(90deg, #223 0%, #22577A 100%)",color:"#fff",padding:"12px 32px",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:24,position:"sticky",top:0,zIndex:100},children:[(0,r.jsx)("div",{style:{flex:1}}),(0,r.jsx)("div",{style:{flex:1,textAlign:"center"},children:(0,r.jsx)(l(),{href:"/",style:{color:"#fff",fontWeight:"bold",fontSize:20,textDecoration:"none"},children:"宣導品管理系統"})}),(0,r.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(0,r.jsx)(l(),{href:"/cart",children:(0,r.jsx)("span",{style:{color:"#fff",marginRight:16,textDecoration:"none",cursor:"pointer"},children:"申請清單"})}),e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{style:{marginRight:16},children:["您好，",e.username,"（",e.role,"）"]}),(0,r.jsx)(l(),{href:"/change-password",style:{color:"#fff",marginRight:16},children:"修改密碼"}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("loginUser"),localStorage.removeItem("applyCart"),t(null),window.location.href="/login"},style:{background:"#fff",color:"#0070f3",border:"none",borderRadius:4,padding:"6px 16px",cursor:"pointer"},children:"登出"})]}):(0,r.jsx)(l(),{href:"/login",style:{color:"#fff",fontWeight:"bold"},children:"登入"})]})]})}},9297:(e,t,n)=>{Promise.resolve().then(n.bind(n,1575)),Promise.resolve().then(n.bind(n,7969)),Promise.resolve().then(n.t.bind(n,2353,23)),Promise.resolve().then(n.t.bind(n,7275,23)),Promise.resolve().then(n.t.bind(n,9324,23))},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[519,874,441,684,358],()=>t(9297)),_N_E=e.O()}]);